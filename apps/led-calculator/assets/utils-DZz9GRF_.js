var Hs=Object.defineProperty;var jt=e=>{throw TypeError(e)};var Ys=(e,t,s)=>t in e?Hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Oe=(e,t,s)=>Ys(e,typeof t!="symbol"?t+"":t,s),ct=(e,t,s)=>t.has(e)||jt("Cannot "+s);var o=(e,t,s)=>(ct(e,t,"read from private field"),s?s.call(e):t.get(e)),E=(e,t,s)=>t.has(e)?jt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),f=(e,t,s,n)=>(ct(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),N=(e,t,s)=>(ct(e,t,"access private method"),s);var We=(e,t,s,n)=>({set _(i){f(e,t,i,s)},get _(){return o(e,t,n)}});import{r as U,j as gs}from"./ui-CFZjDxNi.js";var Je=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ve=typeof window>"u"||"Deno"in globalThis;function Q(){}function zs(e,t){return typeof e=="function"?e(t):e}function pt(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ts(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ne(e,t){return typeof e=="function"?e(t):e}function H(e,t){return typeof e=="function"?e(t):e}function Bt(e,t){const{type:s="all",exact:n,fetchStatus:i,predicate:r,queryKey:a,stale:h}=e;if(a){if(n){if(t.queryHash!==wt(a,t.options))return!1}else if(!Ve(t.queryKey,a))return!1}if(s!=="all"){const u=t.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||i&&i!==t.state.fetchStatus||r&&!r(t))}function Qt(e,t){const{exact:s,status:n,predicate:i,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(s){if(Qe(t.options.mutationKey)!==Qe(r))return!1}else if(!Ve(t.options.mutationKey,r))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function wt(e,t){return(t?.queryKeyHashFn||Qe)(e)}function Qe(e){return JSON.stringify(e,(t,s)=>mt(s)?Object.keys(s).sort().reduce((n,i)=>(n[i]=s[i],n),{}):s)}function Ve(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Ve(e[s],t[s])):!1}function Os(e,t){if(e===t)return e;const s=Vt(e)&&Vt(t);if(s||mt(e)&&mt(t)){const n=s?e:Object.keys(e),i=n.length,r=s?t:Object.keys(t),a=r.length,h=s?[]:{};let u=0;for(let l=0;l<a;l++){const d=s?l:r[l];(!s&&n.includes(d)||s)&&e[d]===void 0&&t[d]===void 0?(h[d]=void 0,u++):(h[d]=Os(e[d],t[d]),h[d]===e[d]&&e[d]!==void 0&&u++)}return i===a&&u===i?e:h}return t}function yt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Vt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mt(e){if(!Gt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Gt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Js(e){return new Promise(t=>{setTimeout(t,e)})}function Et(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Os(e,t):t}function Ks(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function Xs(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var kt=Symbol();function bs(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===kt?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var he,te,Ie,hs,Ws=(hs=class extends Je{constructor(){super();E(this,he);E(this,te);E(this,Ie);f(this,Ie,t=>{if(!ve&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){o(this,te)||this.setEventListener(o(this,Ie))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,te))==null||t.call(this),f(this,te,void 0))}setEventListener(t){var s;f(this,Ie,t),(s=o(this,te))==null||s.call(this),f(this,te,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){o(this,he)!==t&&(f(this,he,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof o(this,he)=="boolean"?o(this,he):globalThis.document?.visibilityState!=="hidden"}},he=new WeakMap,te=new WeakMap,Ie=new WeakMap,hs),Ft=new Ws,Se,se,Ce,ls,Zs=(ls=class extends Je{constructor(){super();E(this,Se,!0);E(this,se);E(this,Ce);f(this,Ce,t=>{if(!ve&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){o(this,se)||this.setEventListener(o(this,Ce))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,se))==null||t.call(this),f(this,se,void 0))}setEventListener(t){var s;f(this,Ce,t),(s=o(this,se))==null||s.call(this),f(this,se,t(this.setOnline.bind(this)))}setOnline(t){o(this,Se)!==t&&(f(this,Se,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return o(this,Se)}},Se=new WeakMap,se=new WeakMap,Ce=new WeakMap,ls),it=new Zs;function vt(){let e,t;const s=new Promise((i,r)=>{e=i,t=r});s.status="pending",s.catch(()=>{});function n(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},s.reject=i=>{n({status:"rejected",reason:i}),t(i)},s}function en(e){return Math.min(1e3*2**e,3e4)}function Ns(e){return(e??"online")==="online"?it.isOnline():!0}var xs=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function ut(e){return e instanceof xs}function Is(e){let t=!1,s=0,n=!1,i;const r=vt(),a=g=>{n||(v(new xs(g)),e.abort?.())},h=()=>{t=!0},u=()=>{t=!1},l=()=>Ft.isFocused()&&(e.networkMode==="always"||it.isOnline())&&e.canRun(),d=()=>Ns(e.networkMode)&&e.canRun(),y=g=>{n||(n=!0,e.onSuccess?.(g),i?.(),r.resolve(g))},v=g=>{n||(n=!0,e.onError?.(g),i?.(),r.reject(g))},O=()=>new Promise(g=>{i=A=>{(n||l())&&g(A)},e.onPause?.()}).then(()=>{i=void 0,n||e.onContinue?.()}),T=()=>{if(n)return;let g;const A=s===0?e.initialPromise:void 0;try{g=A??e.fn()}catch(S){g=Promise.reject(S)}Promise.resolve(g).then(y).catch(S=>{if(n)return;const M=e.retry??(ve?0:3),R=e.retryDelay??en,w=typeof R=="function"?R(s,S):R,Z=M===!0||typeof M=="number"&&s<M||typeof M=="function"&&M(s,S);if(t||!Z){v(S);return}s++,e.onFail?.(s,S),Js(w).then(()=>l()?void 0:O()).then(()=>{t?v(S):T()})})};return{promise:r,cancel:a,continue:()=>(i?.(),r),cancelRetry:h,continueRetry:u,canStart:d,start:()=>(d()?T():O().then(T),r)}}var tn=e=>setTimeout(e,0);function sn(){let e=[],t=0,s=h=>{h()},n=h=>{h()},i=tn;const r=h=>{t?e.push(h):i(()=>{s(h)})},a=()=>{const h=e;e=[],h.length&&i(()=>{n(()=>{h.forEach(u=>{s(u)})})})};return{batch:h=>{let u;t++;try{u=h()}finally{t--,t||a()}return u},batchCalls:h=>(...u)=>{r(()=>{h(...u)})},schedule:r,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{i=h}}}var k=sn(),le,ds,Ss=(ds=class{constructor(){E(this,le)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pt(this.gcTime)&&f(this,le,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ve?1/0:5*60*1e3))}clearGcTimeout(){o(this,le)&&(clearTimeout(o(this,le)),f(this,le,void 0))}},le=new WeakMap,ds),Ae,De,B,de,F,$e,fe,G,X,fs,nn=(fs=class extends Ss{constructor(t){super();E(this,G);E(this,Ae);E(this,De);E(this,B);E(this,de);E(this,F);E(this,$e);E(this,fe);f(this,fe,!1),f(this,$e,t.defaultOptions),this.setOptions(t.options),this.observers=[],f(this,de,t.client),f(this,B,o(this,de).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,f(this,Ae,rn(this.options)),this.state=t.state??o(this,Ae),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return o(this,F)?.promise}setOptions(t){this.options={...o(this,$e),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&o(this,B).remove(this)}setData(t,s){const n=Et(this.state.data,t,this.options);return N(this,G,X).call(this,{data:n,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),n}setState(t,s){N(this,G,X).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){const s=o(this,F)?.promise;return o(this,F)?.cancel(t),s?s.then(Q).catch(Q):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(o(this,Ae))}isActive(){return this.observers.some(t=>H(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Ts(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),o(this,F)?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),o(this,F)?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),o(this,B).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(o(this,F)&&(o(this,fe)?o(this,F).cancel({revert:!0}):o(this,F).cancelRetry()),this.scheduleGc()),o(this,B).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||N(this,G,X).call(this,{type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(o(this,F))return o(this,F).continueRetry(),o(this,F).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(l=>l.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(f(this,fe,!0),n.signal)})},r=()=>{const u=bs(this.options,s),l={client:o(this,de),queryKey:this.queryKey,meta:this.meta};return i(l),f(this,fe,!1),this.options.persister?this.options.persister(u,l,this):u(l)},a={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:o(this,de),state:this.state,fetchFn:r};i(a),this.options.behavior?.onFetch(a,this),f(this,De,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&N(this,G,X).call(this,{type:"fetch",meta:a.fetchOptions?.meta});const h=u=>{ut(u)&&u.silent||N(this,G,X).call(this,{type:"error",error:u}),ut(u)||(o(this,B).config.onError?.(u,this),o(this,B).config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return f(this,F,Is({initialPromise:s?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{if(u===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(l){h(l);return}o(this,B).config.onSuccess?.(u,this),o(this,B).config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:h,onFail:(u,l)=>{N(this,G,X).call(this,{type:"failed",failureCount:u,error:l})},onPause:()=>{N(this,G,X).call(this,{type:"pause"})},onContinue:()=>{N(this,G,X).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),o(this,F).start()}},Ae=new WeakMap,De=new WeakMap,B=new WeakMap,de=new WeakMap,F=new WeakMap,$e=new WeakMap,fe=new WeakMap,G=new WeakSet,X=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Cs(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return ut(i)&&i.revert&&o(this,De)?{...o(this,De),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),k.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),o(this,B).notify({query:this,type:"updated",action:t})})},fs);function Cs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ns(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rn(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var z,ps,on=(ps=class extends Je{constructor(t={}){super();E(this,z);this.config=t,f(this,z,new Map)}build(t,s,n){const i=s.queryKey,r=s.queryHash??wt(i,s);let a=this.get(r);return a||(a=new nn({client:t,queryKey:i,queryHash:r,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){o(this,z).has(t.queryHash)||(o(this,z).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=o(this,z).get(t.queryHash);s&&(t.destroy(),s===t&&o(this,z).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){k.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return o(this,z).get(t)}getAll(){return[...o(this,z).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Bt(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>Bt(t,n)):s}notify(t){k.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){k.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){k.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},z=new WeakMap,ps),J,P,pe,K,ee,ys,an=(ys=class extends Ss{constructor(t){super();E(this,K);E(this,J);E(this,P);E(this,pe);this.mutationId=t.mutationId,f(this,P,t.mutationCache),f(this,J,[]),this.state=t.state||cn(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){o(this,J).includes(t)||(o(this,J).push(t),this.clearGcTimeout(),o(this,P).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){f(this,J,o(this,J).filter(s=>s!==t)),this.scheduleGc(),o(this,P).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){o(this,J).length||(this.state.status==="pending"?this.scheduleGc():o(this,P).remove(this))}continue(){return o(this,pe)?.continue()??this.execute(this.state.variables)}async execute(t){f(this,pe,Is({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,r)=>{N(this,K,ee).call(this,{type:"failed",failureCount:i,error:r})},onPause:()=>{N(this,K,ee).call(this,{type:"pause"})},onContinue:()=>{N(this,K,ee).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>o(this,P).canRun(this)}));const s=this.state.status==="pending",n=!o(this,pe).canStart();try{if(!s){N(this,K,ee).call(this,{type:"pending",variables:t,isPaused:n}),await o(this,P).config.onMutate?.(t,this);const r=await this.options.onMutate?.(t);r!==this.state.context&&N(this,K,ee).call(this,{type:"pending",context:r,variables:t,isPaused:n})}const i=await o(this,pe).start();return await o(this,P).config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await o(this,P).config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),N(this,K,ee).call(this,{type:"success",data:i}),i}catch(i){try{throw await o(this,P).config.onError?.(i,t,this.state.context,this),await this.options.onError?.(i,t,this.state.context),await o(this,P).config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{N(this,K,ee).call(this,{type:"error",error:i})}}finally{o(this,P).runNext(this)}}},J=new WeakMap,P=new WeakMap,pe=new WeakMap,K=new WeakSet,ee=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),k.batch(()=>{o(this,J).forEach(n=>{n.onMutationUpdate(t)}),o(this,P).notify({mutation:this,type:"updated",action:t})})},ys);function cn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var W,$,He,ms,un=(ms=class extends Je{constructor(t={}){super();E(this,W);E(this,$);E(this,He);this.config=t,f(this,W,new Set),f(this,$,new Map),f(this,He,0)}build(t,s,n){const i=new an({mutationCache:this,mutationId:++We(this,He)._,options:t.defaultMutationOptions(s),state:n});return this.add(i),i}add(t){o(this,W).add(t);const s=Ze(t);if(typeof s=="string"){const n=o(this,$).get(s);n?n.push(t):o(this,$).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(o(this,W).delete(t)){const s=Ze(t);if(typeof s=="string"){const n=o(this,$).get(s);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&o(this,$).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Ze(t);if(typeof s=="string"){const i=o(this,$).get(s)?.find(r=>r.state.status==="pending");return!i||i===t}else return!0}runNext(t){const s=Ze(t);return typeof s=="string"?o(this,$).get(s)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){k.batch(()=>{o(this,W).forEach(t=>{this.notify({type:"removed",mutation:t})}),o(this,W).clear(),o(this,$).clear()})}getAll(){return Array.from(o(this,W))}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Qt(s,n))}findAll(t={}){return this.getAll().filter(s=>Qt(t,s))}notify(t){k.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return k.batch(()=>Promise.all(t.map(s=>s.continue().catch(Q))))}},W=new WeakMap,$=new WeakMap,He=new WeakMap,ms);function Ze(e){return e.options.scope?.id}function $t(e){return{onFetch:(t,s)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},u=0;const l=async()=>{let d=!1;const y=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(t.signal.aborted?d=!0:t.signal.addEventListener("abort",()=>{d=!0}),t.signal)})},v=bs(t.options,t.fetchOptions),O=async(T,g,A)=>{if(d)return Promise.reject();if(g==null&&T.pages.length)return Promise.resolve(T);const S={client:t.client,queryKey:t.queryKey,pageParam:g,direction:A?"backward":"forward",meta:t.options.meta};y(S);const M=await v(S),{maxPages:R}=t.options,w=A?Xs:Ks;return{pages:w(T.pages,M,R),pageParams:w(T.pageParams,g,R)}};if(i&&r.length){const T=i==="backward",g=T?hn:Ht,A={pages:r,pageParams:a},S=g(n,A);h=await O(A,S,T)}else{const T=e??r.length;do{const g=u===0?a[0]??n.initialPageParam:Ht(n,h);if(u>0&&g==null)break;h=await O(h,g),u++}while(u<T)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=l}}}function Ht(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function hn(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var C,ne,ie,Re,_e,re,we,ke,Es,Ri=(Es=class{constructor(e={}){E(this,C);E(this,ne);E(this,ie);E(this,Re);E(this,_e);E(this,re);E(this,we);E(this,ke);f(this,C,e.queryCache||new on),f(this,ne,e.mutationCache||new un),f(this,ie,e.defaultOptions||{}),f(this,Re,new Map),f(this,_e,new Map),f(this,re,0)}mount(){We(this,re)._++,o(this,re)===1&&(f(this,we,Ft.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,C).onFocus())})),f(this,ke,it.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,C).onOnline())})))}unmount(){var e,t;We(this,re)._--,o(this,re)===0&&((e=o(this,we))==null||e.call(this),f(this,we,void 0),(t=o(this,ke))==null||t.call(this),f(this,ke,void 0))}isFetching(e){return o(this,C).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return o(this,ne).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return o(this,C).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=o(this,C).build(this,t),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ne(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return o(this,C).findAll(e).map(({queryKey:t,state:s})=>{const n=s.data;return[t,n]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),r=o(this,C).get(n.queryHash)?.state.data,a=zs(t,r);if(a!==void 0)return o(this,C).build(this,n).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return k.batch(()=>o(this,C).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return o(this,C).get(t.queryHash)?.state}removeQueries(e){const t=o(this,C);k.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=o(this,C);return k.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},n=k.batch(()=>o(this,C).findAll(e).map(i=>i.cancel(s)));return Promise.all(n).then(Q).catch(Q)}invalidateQueries(e,t={}){return k.batch(()=>(o(this,C).findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=k.batch(()=>o(this,C).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let r=i.fetch(void 0,s);return s.throwOnError||(r=r.catch(Q)),i.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(n).then(Q)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=o(this,C).build(this,t);return s.isStaleByTime(Ne(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Q).catch(Q)}fetchInfiniteQuery(e){return e.behavior=$t(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Q).catch(Q)}ensureInfiniteQueryData(e){return e.behavior=$t(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return it.isOnline()?o(this,ne).resumePausedMutations():Promise.resolve()}getQueryCache(){return o(this,C)}getMutationCache(){return o(this,ne)}getDefaultOptions(){return o(this,ie)}setDefaultOptions(e){f(this,ie,e)}setQueryDefaults(e,t){o(this,Re).set(Qe(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...o(this,Re).values()],s={};return t.forEach(n=>{Ve(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,t){o(this,_e).set(Qe(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...o(this,_e).values()],s={};return t.forEach(n=>{Ve(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...o(this,ie).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=wt(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===kt&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...o(this,ie).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){o(this,C).clear(),o(this,ne).clear()}},C=new WeakMap,ne=new WeakMap,ie=new WeakMap,Re=new WeakMap,_e=new WeakMap,re=new WeakMap,we=new WeakMap,ke=new WeakMap,Es),q,x,Ye,L,ye,Fe,oe,ae,ze,Pe,Le,me,Ee,ce,Me,I,je,gt,Tt,Ot,bt,Nt,xt,It,As,vs,ln=(vs=class extends Je{constructor(t,s){super();E(this,I);E(this,q);E(this,x);E(this,Ye);E(this,L);E(this,ye);E(this,Fe);E(this,oe);E(this,ae);E(this,ze);E(this,Pe);E(this,Le);E(this,me);E(this,Ee);E(this,ce);E(this,Me,new Set);this.options=s,f(this,q,t),f(this,ae,null),f(this,oe,vt()),this.options.experimental_prefetchInRender||o(this,oe).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(o(this,x).addObserver(this),Yt(o(this,x),this.options)?N(this,I,je).call(this):this.updateResult(),N(this,I,bt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return St(o(this,x),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return St(o(this,x),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,N(this,I,Nt).call(this),N(this,I,xt).call(this),o(this,x).removeObserver(this)}setOptions(t){const s=this.options,n=o(this,x);if(this.options=o(this,q).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof H(this.options.enabled,o(this,x))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");N(this,I,It).call(this),o(this,x).setOptions(this.options),s._defaulted&&!yt(this.options,s)&&o(this,q).getQueryCache().notify({type:"observerOptionsUpdated",query:o(this,x),observer:this});const i=this.hasListeners();i&&zt(o(this,x),n,this.options,s)&&N(this,I,je).call(this),this.updateResult(),i&&(o(this,x)!==n||H(this.options.enabled,o(this,x))!==H(s.enabled,o(this,x))||Ne(this.options.staleTime,o(this,x))!==Ne(s.staleTime,o(this,x)))&&N(this,I,gt).call(this);const r=N(this,I,Tt).call(this);i&&(o(this,x)!==n||H(this.options.enabled,o(this,x))!==H(s.enabled,o(this,x))||r!==o(this,ce))&&N(this,I,Ot).call(this,r)}getOptimisticResult(t){const s=o(this,q).getQueryCache().build(o(this,q),t),n=this.createResult(s,t);return fn(this,n)&&(f(this,L,n),f(this,Fe,this.options),f(this,ye,o(this,x).state)),n}getCurrentResult(){return o(this,L)}trackResult(t,s){const n={};return Object.keys(t).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),s?.(i),t[i])})}),n}trackProp(t){o(this,Me).add(t)}getCurrentQuery(){return o(this,x)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=o(this,q).defaultQueryOptions(t),n=o(this,q).getQueryCache().build(o(this,q),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return N(this,I,je).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),o(this,L)))}createResult(t,s){const n=o(this,x),i=this.options,r=o(this,L),a=o(this,ye),h=o(this,Fe),l=t!==n?t.state:o(this,Ye),{state:d}=t;let y={...d},v=!1,O;if(s._optimisticResults){const j=this.hasListeners(),Ke=!j&&Yt(t,s),Te=j&&zt(t,n,s,i);(Ke||Te)&&(y={...y,...Cs(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:T,errorUpdatedAt:g,status:A}=y;O=y.data;let S=!1;if(s.placeholderData!==void 0&&O===void 0&&A==="pending"){let j;r?.isPlaceholderData&&s.placeholderData===h?.placeholderData?(j=r.data,S=!0):j=typeof s.placeholderData=="function"?s.placeholderData(o(this,Le)?.state.data,o(this,Le)):s.placeholderData,j!==void 0&&(A="success",O=Et(r?.data,j,s),v=!0)}if(s.select&&O!==void 0&&!S)if(r&&O===a?.data&&s.select===o(this,ze))O=o(this,Pe);else try{f(this,ze,s.select),O=s.select(O),O=Et(r?.data,O,s),f(this,Pe,O),f(this,ae,null)}catch(j){f(this,ae,j)}o(this,ae)&&(T=o(this,ae),O=o(this,Pe),g=Date.now(),A="error");const M=y.fetchStatus==="fetching",R=A==="pending",w=A==="error",Z=R&&M,Ue=O!==void 0,Y={status:A,fetchStatus:y.fetchStatus,isPending:R,isSuccess:A==="success",isError:w,isInitialLoading:Z,isLoading:Z,data:O,dataUpdatedAt:y.dataUpdatedAt,error:T,errorUpdatedAt:g,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>l.dataUpdateCount||y.errorUpdateCount>l.errorUpdateCount,isFetching:M,isRefetching:M&&!R,isLoadingError:w&&!Ue,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:w&&Ue,isStale:Pt(t,s),refetch:this.refetch,promise:o(this,oe)};if(this.options.experimental_prefetchInRender){const j=Xe=>{Y.status==="error"?Xe.reject(Y.error):Y.data!==void 0&&Xe.resolve(Y.data)},Ke=()=>{const Xe=f(this,oe,Y.promise=vt());j(Xe)},Te=o(this,oe);switch(Te.status){case"pending":t.queryHash===n.queryHash&&j(Te);break;case"fulfilled":(Y.status==="error"||Y.data!==Te.value)&&Ke();break;case"rejected":(Y.status!=="error"||Y.error!==Te.reason)&&Ke();break}}return Y}updateResult(){const t=o(this,L),s=this.createResult(o(this,x),this.options);if(f(this,ye,o(this,x).state),f(this,Fe,this.options),o(this,ye).data!==void 0&&f(this,Le,o(this,x)),yt(s,t))return;f(this,L,s);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!o(this,Me).size)return!0;const a=new Set(r??o(this,Me));return this.options.throwOnError&&a.add("error"),Object.keys(o(this,L)).some(h=>{const u=h;return o(this,L)[u]!==t[u]&&a.has(u)})};N(this,I,As).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&N(this,I,bt).call(this)}},q=new WeakMap,x=new WeakMap,Ye=new WeakMap,L=new WeakMap,ye=new WeakMap,Fe=new WeakMap,oe=new WeakMap,ae=new WeakMap,ze=new WeakMap,Pe=new WeakMap,Le=new WeakMap,me=new WeakMap,Ee=new WeakMap,ce=new WeakMap,Me=new WeakMap,I=new WeakSet,je=function(t){N(this,I,It).call(this);let s=o(this,x).fetch(this.options,t);return t?.throwOnError||(s=s.catch(Q)),s},gt=function(){N(this,I,Nt).call(this);const t=Ne(this.options.staleTime,o(this,x));if(ve||o(this,L).isStale||!pt(t))return;const n=Ts(o(this,L).dataUpdatedAt,t)+1;f(this,me,setTimeout(()=>{o(this,L).isStale||this.updateResult()},n))},Tt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(o(this,x)):this.options.refetchInterval)??!1},Ot=function(t){N(this,I,xt).call(this),f(this,ce,t),!(ve||H(this.options.enabled,o(this,x))===!1||!pt(o(this,ce))||o(this,ce)===0)&&f(this,Ee,setInterval(()=>{(this.options.refetchIntervalInBackground||Ft.isFocused())&&N(this,I,je).call(this)},o(this,ce)))},bt=function(){N(this,I,gt).call(this),N(this,I,Ot).call(this,N(this,I,Tt).call(this))},Nt=function(){o(this,me)&&(clearTimeout(o(this,me)),f(this,me,void 0))},xt=function(){o(this,Ee)&&(clearInterval(o(this,Ee)),f(this,Ee,void 0))},It=function(){const t=o(this,q).getQueryCache().build(o(this,q),this.options);if(t===o(this,x))return;const s=o(this,x);f(this,x,t),f(this,Ye,t.state),this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))},As=function(t){k.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(o(this,L))}),o(this,q).getQueryCache().notify({query:o(this,x),type:"observerResultsUpdated"})})},vs);function dn(e,t){return H(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Yt(e,t){return dn(e,t)||e.state.data!==void 0&&St(e,t,t.refetchOnMount)}function St(e,t,s){if(H(t.enabled,e)!==!1){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&Pt(e,t)}return!1}function zt(e,t,s,n){return(e!==t||H(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Pt(e,s)}function Pt(e,t){return H(t.enabled,e)!==!1&&e.isStaleByTime(Ne(t.staleTime,e))}function fn(e,t){return!yt(e.getCurrentResult(),t)}var Ds=U.createContext(void 0),pn=e=>{const t=U.useContext(Ds);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_i=({client:e,children:t})=>(U.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),gs.jsx(Ds.Provider,{value:e,children:t})),Rs=U.createContext(!1),yn=()=>U.useContext(Rs);Rs.Provider;function _s(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ws=U.createContext(_s()),mn=()=>U.useContext(ws),wi=({children:e})=>{const[t]=U.useState(()=>_s());return gs.jsx(ws.Provider,{value:t,children:typeof e=="function"?e(t):e})};function En(e,t){return typeof e=="function"?e(...t):!!e}function Jt(){}var vn=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gn=e=>{U.useEffect(()=>{e.clearReset()},[e])},Tn=({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||En(s,[e.error,n])),On=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...s)=>Math.max(t(...s),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},bn=(e,t)=>e.isLoading&&e.isFetching&&!t,Nn=(e,t)=>e?.suspense&&t.isPending,Kt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function xn(e,t,s){const n=pn(),i=yn(),r=mn(),a=n.defaultQueryOptions(e);n.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=i?"isRestoring":"optimistic",On(a),vn(a,r),gn(r);const h=!n.getQueryCache().get(a.queryHash),[u]=U.useState(()=>new t(n,a)),l=u.getOptimisticResult(a),d=!i&&e.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(y=>{const v=d?u.subscribe(k.batchCalls(y)):Jt;return u.updateResult(),v},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),U.useEffect(()=>{u.setOptions(a)},[a,u]),Nn(a,l))throw Kt(a,u,r);if(Tn({result:l,errorResetBoundary:r,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw l.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(a,l),a.experimental_prefetchInRender&&!ve&&bn(l,i)&&(h?Kt(a,u,r):n.getQueryCache().get(a.queryHash)?.promise)?.catch(Jt).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?l:u.trackResult(l)}function ki(e,t){return xn(e,ln)}class xe extends Error{constructor(s,n){const i=`${xe.extractMessage(s)}: ${JSON.stringify({response:s,request:n})}`;super(i);Oe(this,"response");Oe(this,"request");Object.setPrototypeOf(this,xe.prototype),this.response=s,this.request=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe)}static extractMessage(s){return s.errors?.[0]?.message??`GraphQL Error (Code: ${String(s.status)})`}}const Xt=e=>e.toUpperCase(),ht=e=>typeof e=="function"?e():e,ks=(e,t)=>e.map((s,n)=>[s,t[n]]),be=e=>{let t={};return e instanceof Headers?t=In(e):Array.isArray(e)?e.forEach(([s,n])=>{s&&n!==void 0&&(t[s]=n)}):e&&(t=e),t},In=e=>{const t={};return e.forEach((s,n)=>{t[n]=s}),t},Sn=e=>{try{const t=e();return Cn(t)?t.catch(s=>Wt(s)):t}catch(t){return Wt(t)}},Wt=e=>e instanceof Error?e:new Error(String(e)),Cn=e=>typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"&&"catch"in e&&typeof e.catch=="function"&&"finally"in e&&typeof e.finally=="function",Lt=e=>{throw new Error(`Unhandled case: ${String(e)}`)},tt=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),An=(e,t)=>e.documents?e:{documents:e,requestHeaders:t,signal:void 0},Dn=(e,t,s)=>e.query?e:{query:e,variables:t,requestHeaders:s,signal:void 0};function st(e,t){if(!!!e)throw new Error(t)}function Rn(e){return typeof e=="object"&&e!==null}function _n(e,t){if(!!!e)throw new Error("Unexpected invariant triggered.")}const wn=/\r\n|[\n\r]/g;function Ct(e,t){let s=0,n=1;for(const i of e.body.matchAll(wn)){if(typeof i.index=="number"||_n(!1),i.index>=t)break;s=i.index+i[0].length,n+=1}return{line:n,column:t+1-s}}function kn(e){return Fs(e.source,Ct(e.source,e.start))}function Fs(e,t){const s=e.locationOffset.column-1,n="".padStart(s)+e.body,i=t.line-1,r=e.locationOffset.line-1,a=t.line+r,h=t.line===1?s:0,u=t.column+h,l=`${e.name}:${a}:${u}
`,d=n.split(/\r\n|[\n\r]/g),y=d[i];if(y.length>120){const v=Math.floor(u/80),O=u%80,T=[];for(let g=0;g<y.length;g+=80)T.push(y.slice(g,g+80));return l+Zt([[`${a} |`,T[0]],...T.slice(1,v+1).map(g=>["|",g]),["|","^".padStart(O)],["|",T[v+1]]])}return l+Zt([[`${a-1} |`,d[i-1]],[`${a} |`,y],["|","^".padStart(u)],[`${a+1} |`,d[i+1]]])}function Zt(e){const t=e.filter(([n,i])=>i!==void 0),s=Math.max(...t.map(([n])=>n.length));return t.map(([n,i])=>n.padStart(s)+(i?" "+i:"")).join(`
`)}function Fn(e){const t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class Mt extends Error{constructor(t,...s){var n,i,r;const{nodes:a,source:h,positions:u,path:l,originalError:d,extensions:y}=Fn(s);super(t),this.name="GraphQLError",this.path=l??void 0,this.originalError=d??void 0,this.nodes=es(Array.isArray(a)?a:a?[a]:void 0);const v=es((n=this.nodes)===null||n===void 0?void 0:n.map(T=>T.loc).filter(T=>T!=null));this.source=h??(v==null||(i=v[0])===null||i===void 0?void 0:i.source),this.positions=u??v?.map(T=>T.start),this.locations=u&&h?u.map(T=>Ct(h,T)):v?.map(T=>Ct(T.source,T.start));const O=Rn(d?.extensions)?d?.extensions:void 0;this.extensions=(r=y??O)!==null&&r!==void 0?r:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),d!=null&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Mt):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const s of this.nodes)s.loc&&(t+=`

`+kn(s.loc));else if(this.source&&this.locations)for(const s of this.locations)t+=`

`+Fs(this.source,s);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function es(e){return e===void 0||e.length===0?void 0:e}function _(e,t,s){return new Mt(`Syntax Error: ${s}`,{source:e,positions:[t]})}class Pn{constructor(t,s,n){this.start=t.start,this.end=s.end,this.startToken=t,this.endToken=s,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Ps{constructor(t,s,n,i,r,a){this.kind=t,this.start=s,this.end=n,this.line=i,this.column=r,this.value=a,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Ls={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Ln=new Set(Object.keys(Ls));function ts(e){const t=e?.kind;return typeof t=="string"&&Ln.has(t)}var ue;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(ue||(ue={}));var At;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(At||(At={}));var m;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(m||(m={}));function Dt(e){return e===9||e===32}function Ge(e){return e>=48&&e<=57}function Ms(e){return e>=97&&e<=122||e>=65&&e<=90}function qs(e){return Ms(e)||e===95}function Mn(e){return Ms(e)||Ge(e)||e===95}function qn(e){var t;let s=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let a=0;a<e.length;++a){var r;const h=e[a],u=Un(h);u!==h.length&&(n=(r=n)!==null&&r!==void 0?r:a,i=a,a!==0&&u<s&&(s=u))}return e.map((a,h)=>h===0?a:a.slice(s)).slice((t=n)!==null&&t!==void 0?t:0,i+1)}function Un(e){let t=0;for(;t<e.length&&Dt(e.charCodeAt(t));)++t;return t}function jn(e,t){const s=e.replace(/"""/g,'\\"""'),n=s.split(/\r\n|[\n\r]/g),i=n.length===1,r=n.length>1&&n.slice(1).every(O=>O.length===0||Dt(O.charCodeAt(0))),a=s.endsWith('\\"""'),h=e.endsWith('"')&&!a,u=e.endsWith("\\"),l=h||u,d=!i||e.length>70||l||r||a;let y="";const v=i&&Dt(e.charCodeAt(0));return(d&&!v||r)&&(y+=`
`),y+=s,(d||l)&&(y+=`
`),'"""'+y+'"""'}var c;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(c||(c={}));class Bn{constructor(t){const s=new Ps(c.SOF,0,0,0,0);this.source=t,this.lastToken=s,this.token=s,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==c.EOF)do if(t.next)t=t.next;else{const s=Vn(this,t.end);t.next=s,s.prev=t,t=s}while(t.kind===c.COMMENT);return t}}function Qn(e){return e===c.BANG||e===c.DOLLAR||e===c.AMP||e===c.PAREN_L||e===c.PAREN_R||e===c.SPREAD||e===c.COLON||e===c.EQUALS||e===c.AT||e===c.BRACKET_L||e===c.BRACKET_R||e===c.BRACE_L||e===c.PIPE||e===c.BRACE_R}function qe(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function rt(e,t){return Us(e.charCodeAt(t))&&js(e.charCodeAt(t+1))}function Us(e){return e>=55296&&e<=56319}function js(e){return e>=56320&&e<=57343}function ge(e,t){const s=e.source.body.codePointAt(t);if(s===void 0)return c.EOF;if(s>=32&&s<=126){const n=String.fromCodePoint(s);return n==='"'?`'"'`:`"${n}"`}return"U+"+s.toString(16).toUpperCase().padStart(4,"0")}function D(e,t,s,n,i){const r=e.line,a=1+s-e.lineStart;return new Ps(t,s,n,r,a,i)}function Vn(e,t){const s=e.source.body,n=s.length;let i=t;for(;i<n;){const r=s.charCodeAt(i);switch(r){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:s.charCodeAt(i+1)===10?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return Gn(e,i);case 33:return D(e,c.BANG,i,i+1);case 36:return D(e,c.DOLLAR,i,i+1);case 38:return D(e,c.AMP,i,i+1);case 40:return D(e,c.PAREN_L,i,i+1);case 41:return D(e,c.PAREN_R,i,i+1);case 46:if(s.charCodeAt(i+1)===46&&s.charCodeAt(i+2)===46)return D(e,c.SPREAD,i,i+3);break;case 58:return D(e,c.COLON,i,i+1);case 61:return D(e,c.EQUALS,i,i+1);case 64:return D(e,c.AT,i,i+1);case 91:return D(e,c.BRACKET_L,i,i+1);case 93:return D(e,c.BRACKET_R,i,i+1);case 123:return D(e,c.BRACE_L,i,i+1);case 124:return D(e,c.PIPE,i,i+1);case 125:return D(e,c.BRACE_R,i,i+1);case 34:return s.charCodeAt(i+1)===34&&s.charCodeAt(i+2)===34?Kn(e,i):Hn(e,i)}if(Ge(r)||r===45)return $n(e,i,r);if(qs(r))return Xn(e,i);throw _(e.source,i,r===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:qe(r)||rt(s,i)?`Unexpected character: ${ge(e,i)}.`:`Invalid character: ${ge(e,i)}.`)}return D(e,c.EOF,n,n)}function Gn(e,t){const s=e.source.body,n=s.length;let i=t+1;for(;i<n;){const r=s.charCodeAt(i);if(r===10||r===13)break;if(qe(r))++i;else if(rt(s,i))i+=2;else break}return D(e,c.COMMENT,t,i,s.slice(t+1,i))}function $n(e,t,s){const n=e.source.body;let i=t,r=s,a=!1;if(r===45&&(r=n.charCodeAt(++i)),r===48){if(r=n.charCodeAt(++i),Ge(r))throw _(e.source,i,`Invalid number, unexpected digit after 0: ${ge(e,i)}.`)}else i=lt(e,i,r),r=n.charCodeAt(i);if(r===46&&(a=!0,r=n.charCodeAt(++i),i=lt(e,i,r),r=n.charCodeAt(i)),(r===69||r===101)&&(a=!0,r=n.charCodeAt(++i),(r===43||r===45)&&(r=n.charCodeAt(++i)),i=lt(e,i,r),r=n.charCodeAt(i)),r===46||qs(r))throw _(e.source,i,`Invalid number, expected digit but got: ${ge(e,i)}.`);return D(e,a?c.FLOAT:c.INT,t,i,n.slice(t,i))}function lt(e,t,s){if(!Ge(s))throw _(e.source,t,`Invalid number, expected digit but got: ${ge(e,t)}.`);const n=e.source.body;let i=t+1;for(;Ge(n.charCodeAt(i));)++i;return i}function Hn(e,t){const s=e.source.body,n=s.length;let i=t+1,r=i,a="";for(;i<n;){const h=s.charCodeAt(i);if(h===34)return a+=s.slice(r,i),D(e,c.STRING,t,i+1,a);if(h===92){a+=s.slice(r,i);const u=s.charCodeAt(i+1)===117?s.charCodeAt(i+2)===123?Yn(e,i):zn(e,i):Jn(e,i);a+=u.value,i+=u.size,r=i;continue}if(h===10||h===13)break;if(qe(h))++i;else if(rt(s,i))i+=2;else throw _(e.source,i,`Invalid character within String: ${ge(e,i)}.`)}throw _(e.source,i,"Unterminated string.")}function Yn(e,t){const s=e.source.body;let n=0,i=3;for(;i<12;){const r=s.charCodeAt(t+i++);if(r===125){if(i<5||!qe(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|Be(r),n<0)break}throw _(e.source,t,`Invalid Unicode escape sequence: "${s.slice(t,t+i)}".`)}function zn(e,t){const s=e.source.body,n=ss(s,t+2);if(qe(n))return{value:String.fromCodePoint(n),size:6};if(Us(n)&&s.charCodeAt(t+6)===92&&s.charCodeAt(t+7)===117){const i=ss(s,t+8);if(js(i))return{value:String.fromCodePoint(n,i),size:12}}throw _(e.source,t,`Invalid Unicode escape sequence: "${s.slice(t,t+6)}".`)}function ss(e,t){return Be(e.charCodeAt(t))<<12|Be(e.charCodeAt(t+1))<<8|Be(e.charCodeAt(t+2))<<4|Be(e.charCodeAt(t+3))}function Be(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Jn(e,t){const s=e.source.body;switch(s.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw _(e.source,t,`Invalid character escape sequence: "${s.slice(t,t+2)}".`)}function Kn(e,t){const s=e.source.body,n=s.length;let i=e.lineStart,r=t+3,a=r,h="";const u=[];for(;r<n;){const l=s.charCodeAt(r);if(l===34&&s.charCodeAt(r+1)===34&&s.charCodeAt(r+2)===34){h+=s.slice(a,r),u.push(h);const d=D(e,c.BLOCK_STRING,t,r+3,qn(u).join(`
`));return e.line+=u.length-1,e.lineStart=i,d}if(l===92&&s.charCodeAt(r+1)===34&&s.charCodeAt(r+2)===34&&s.charCodeAt(r+3)===34){h+=s.slice(a,r),a=r+1,r+=4;continue}if(l===10||l===13){h+=s.slice(a,r),u.push(h),l===13&&s.charCodeAt(r+1)===10?r+=2:++r,h="",a=r,i=r;continue}if(qe(l))++r;else if(rt(s,r))r+=2;else throw _(e.source,r,`Invalid character within String: ${ge(e,r)}.`)}throw _(e.source,r,"Unterminated string.")}function Xn(e,t){const s=e.source.body,n=s.length;let i=t+1;for(;i<n;){const r=s.charCodeAt(i);if(Mn(r))++i;else break}return D(e,c.NAME,t,i,s.slice(t,i))}const Wn=10,Bs=2;function qt(e){return ot(e,[])}function ot(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return Zn(e,t);default:return String(e)}}function Zn(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const s=[...t,e];if(ei(e)){const n=e.toJSON();if(n!==e)return typeof n=="string"?n:ot(n,s)}else if(Array.isArray(e))return si(e,s);return ti(e,s)}function ei(e){return typeof e.toJSON=="function"}function ti(e,t){const s=Object.entries(e);return s.length===0?"{}":t.length>Bs?"["+ni(e)+"]":"{ "+s.map(([i,r])=>i+": "+ot(r,t)).join(", ")+" }"}function si(e,t){if(e.length===0)return"[]";if(t.length>Bs)return"[Array]";const s=Math.min(Wn,e.length),n=e.length-s,i=[];for(let r=0;r<s;++r)i.push(ot(e[r],t));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function ni(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const s=e.constructor.name;if(typeof s=="string"&&s!=="")return s}return t}const ii=globalThis.process&&!0,ri=ii?function(t,s){return t instanceof s}:function(t,s){if(t instanceof s)return!0;if(typeof t=="object"&&t!==null){var n;const i=s.prototype[Symbol.toStringTag],r=Symbol.toStringTag in t?t[Symbol.toStringTag]:(n=t.constructor)===null||n===void 0?void 0:n.name;if(i===r){const a=qt(t);throw new Error(`Cannot use ${i} "${a}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Qs{constructor(t,s="GraphQL request",n={line:1,column:1}){typeof t=="string"||st(!1,`Body must be a string. Received: ${qt(t)}.`),this.body=t,this.name=s,this.locationOffset=n,this.locationOffset.line>0||st(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||st(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function oi(e){return ri(e,Qs)}function ai(e,t){const s=new ci(e,t),n=s.parseDocument();return Object.defineProperty(n,"tokenCount",{enumerable:!1,value:s.tokenCount}),n}class ci{constructor(t,s={}){const n=oi(t)?t:new Qs(t);this._lexer=new Bn(n),this._options=s,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const t=this.expectToken(c.NAME);return this.node(t,{kind:m.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:m.DOCUMENT,definitions:this.many(c.SOF,this.parseDefinition,c.EOF)})}parseDefinition(){if(this.peek(c.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),s=t?this._lexer.lookahead():this._lexer.token;if(s.kind===c.NAME){switch(s.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw _(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(s.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(s)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(c.BRACE_L))return this.node(t,{kind:m.OPERATION_DEFINITION,operation:ue.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const s=this.parseOperationType();let n;return this.peek(c.NAME)&&(n=this.parseName()),this.node(t,{kind:m.OPERATION_DEFINITION,operation:s,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(c.NAME);switch(t.value){case"query":return ue.QUERY;case"mutation":return ue.MUTATION;case"subscription":return ue.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(c.PAREN_L,this.parseVariableDefinition,c.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:m.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(c.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(c.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(c.DOLLAR),this.node(t,{kind:m.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:m.SELECTION_SET,selections:this.many(c.BRACE_L,this.parseSelection,c.BRACE_R)})}parseSelection(){return this.peek(c.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,s=this.parseName();let n,i;return this.expectOptionalToken(c.COLON)?(n=s,i=this.parseName()):i=s,this.node(t,{kind:m.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(c.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const s=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(c.PAREN_L,s,c.PAREN_R)}parseArgument(t=!1){const s=this._lexer.token,n=this.parseName();return this.expectToken(c.COLON),this.node(s,{kind:m.ARGUMENT,name:n,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(c.SPREAD);const s=this.expectOptionalKeyword("on");return!s&&this.peek(c.NAME)?this.node(t,{kind:m.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:m.INLINE_FRAGMENT,typeCondition:s?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:m.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:m.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const s=this._lexer.token;switch(s.kind){case c.BRACKET_L:return this.parseList(t);case c.BRACE_L:return this.parseObject(t);case c.INT:return this.advanceLexer(),this.node(s,{kind:m.INT,value:s.value});case c.FLOAT:return this.advanceLexer(),this.node(s,{kind:m.FLOAT,value:s.value});case c.STRING:case c.BLOCK_STRING:return this.parseStringLiteral();case c.NAME:switch(this.advanceLexer(),s.value){case"true":return this.node(s,{kind:m.BOOLEAN,value:!0});case"false":return this.node(s,{kind:m.BOOLEAN,value:!1});case"null":return this.node(s,{kind:m.NULL});default:return this.node(s,{kind:m.ENUM,value:s.value})}case c.DOLLAR:if(t)if(this.expectToken(c.DOLLAR),this._lexer.token.kind===c.NAME){const n=this._lexer.token.value;throw _(this._lexer.source,s.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(s);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:m.STRING,value:t.value,block:t.kind===c.BLOCK_STRING})}parseList(t){const s=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:m.LIST,values:this.any(c.BRACKET_L,s,c.BRACKET_R)})}parseObject(t){const s=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:m.OBJECT,fields:this.any(c.BRACE_L,s,c.BRACE_R)})}parseObjectField(t){const s=this._lexer.token,n=this.parseName();return this.expectToken(c.COLON),this.node(s,{kind:m.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t)})}parseDirectives(t){const s=[];for(;this.peek(c.AT);)s.push(this.parseDirective(t));return s}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const s=this._lexer.token;return this.expectToken(c.AT),this.node(s,{kind:m.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let s;if(this.expectOptionalToken(c.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(c.BRACKET_R),s=this.node(t,{kind:m.LIST_TYPE,type:n})}else s=this.parseNamedType();return this.expectOptionalToken(c.BANG)?this.node(t,{kind:m.NON_NULL_TYPE,type:s}):s}parseNamedType(){return this.node(this._lexer.token,{kind:m.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(c.STRING)||this.peek(c.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(c.BRACE_L,this.parseOperationTypeDefinition,c.BRACE_R);return this.node(t,{kind:m.SCHEMA_DEFINITION,description:s,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const t=this._lexer.token,s=this.parseOperationType();this.expectToken(c.COLON);const n=this.parseNamedType();return this.node(t,{kind:m.OPERATION_TYPE_DEFINITION,operation:s,type:n})}parseScalarTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(t,{kind:m.SCALAR_TYPE_DEFINITION,description:s,name:n,directives:i})}parseObjectTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),a=this.parseFieldsDefinition();return this.node(t,{kind:m.OBJECT_TYPE_DEFINITION,description:s,name:n,interfaces:i,directives:r,fields:a})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(c.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(c.BRACE_L,this.parseFieldDefinition,c.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,s=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(c.COLON);const r=this.parseTypeReference(),a=this.parseConstDirectives();return this.node(t,{kind:m.FIELD_DEFINITION,description:s,name:n,arguments:i,type:r,directives:a})}parseArgumentDefs(){return this.optionalMany(c.PAREN_L,this.parseInputValueDef,c.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,s=this.parseDescription(),n=this.parseName();this.expectToken(c.COLON);const i=this.parseTypeReference();let r;this.expectOptionalToken(c.EQUALS)&&(r=this.parseConstValueLiteral());const a=this.parseConstDirectives();return this.node(t,{kind:m.INPUT_VALUE_DEFINITION,description:s,name:n,type:i,defaultValue:r,directives:a})}parseInterfaceTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),a=this.parseFieldsDefinition();return this.node(t,{kind:m.INTERFACE_TYPE_DEFINITION,description:s,name:n,interfaces:i,directives:r,fields:a})}parseUnionTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();return this.node(t,{kind:m.UNION_TYPE_DEFINITION,description:s,name:n,directives:i,types:r})}parseUnionMemberTypes(){return this.expectOptionalToken(c.EQUALS)?this.delimitedMany(c.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();return this.node(t,{kind:m.ENUM_TYPE_DEFINITION,description:s,name:n,directives:i,values:r})}parseEnumValuesDefinition(){return this.optionalMany(c.BRACE_L,this.parseEnumValueDefinition,c.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,s=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(t,{kind:m.ENUM_VALUE_DEFINITION,description:s,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw _(this._lexer.source,this._lexer.token.start,`${et(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();return this.node(t,{kind:m.INPUT_OBJECT_TYPE_DEFINITION,description:s,name:n,directives:i,fields:r})}parseInputFieldsDefinition(){return this.optionalMany(c.BRACE_L,this.parseInputValueDef,c.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===c.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const s=this.parseConstDirectives(),n=this.optionalMany(c.BRACE_L,this.parseOperationTypeDefinition,c.BRACE_R);if(s.length===0&&n.length===0)throw this.unexpected();return this.node(t,{kind:m.SCHEMA_EXTENSION,directives:s,operationTypes:n})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const s=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(t,{kind:m.SCALAR_TYPE_EXTENSION,name:s,directives:n})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const s=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:m.OBJECT_TYPE_EXTENSION,name:s,interfaces:n,directives:i,fields:r})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const s=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:m.INTERFACE_TYPE_EXTENSION,name:s,interfaces:n,directives:i,fields:r})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const s=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:m.UNION_TYPE_EXTENSION,name:s,directives:n,types:i})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const s=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:m.ENUM_TYPE_EXTENSION,name:s,directives:n,values:i})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const s=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:m.INPUT_OBJECT_TYPE_EXTENSION,name:s,directives:n,fields:i})}parseDirectiveDefinition(){const t=this._lexer.token,s=this.parseDescription();this.expectKeyword("directive"),this.expectToken(c.AT);const n=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const a=this.parseDirectiveLocations();return this.node(t,{kind:m.DIRECTIVE_DEFINITION,description:s,name:n,arguments:i,repeatable:r,locations:a})}parseDirectiveLocations(){return this.delimitedMany(c.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,s=this.parseName();if(Object.prototype.hasOwnProperty.call(At,s.value))return s;throw this.unexpected(t)}node(t,s){return this._options.noLocation!==!0&&(s.loc=new Pn(t,this._lexer.lastToken,this._lexer.source)),s}peek(t){return this._lexer.token.kind===t}expectToken(t){const s=this._lexer.token;if(s.kind===t)return this.advanceLexer(),s;throw _(this._lexer.source,s.start,`Expected ${Vs(t)}, found ${et(s)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const s=this._lexer.token;if(s.kind===c.NAME&&s.value===t)this.advanceLexer();else throw _(this._lexer.source,s.start,`Expected "${t}", found ${et(s)}.`)}expectOptionalKeyword(t){const s=this._lexer.token;return s.kind===c.NAME&&s.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const s=t??this._lexer.token;return _(this._lexer.source,s.start,`Unexpected ${et(s)}.`)}any(t,s,n){this.expectToken(t);const i=[];for(;!this.expectOptionalToken(n);)i.push(s.call(this));return i}optionalMany(t,s,n){if(this.expectOptionalToken(t)){const i=[];do i.push(s.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(t,s,n){this.expectToken(t);const i=[];do i.push(s.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(t,s){this.expectOptionalToken(t);const n=[];do n.push(s.call(this));while(this.expectOptionalToken(t));return n}advanceLexer(){const{maxTokens:t}=this._options,s=this._lexer.advance();if(s.kind!==c.EOF&&(++this._tokenCounter,t!==void 0&&this._tokenCounter>t))throw _(this._lexer.source,s.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function et(e){const t=e.value;return Vs(e.kind)+(t!=null?` "${t}"`:"")}function Vs(e){return Qn(e)?`"${e}"`:e}function ui(e){return`"${e.replace(hi,li)}"`}const hi=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function li(e){return di[e.charCodeAt(0)]}const di=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],fi=Object.freeze({});function pi(e,t,s=Ls){const n=new Map;for(const S of Object.values(m))n.set(S,yi(t,S));let i,r=Array.isArray(e),a=[e],h=-1,u=[],l=e,d,y;const v=[],O=[];do{h++;const S=h===a.length,M=S&&u.length!==0;if(S){if(d=O.length===0?void 0:v[v.length-1],l=y,y=O.pop(),M)if(r){l=l.slice();let w=0;for(const[Z,Ue]of u){const at=Z-w;Ue===null?(l.splice(at,1),w++):l[at]=Ue}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[w,Z]of u)l[w]=Z}h=i.index,a=i.keys,u=i.edits,r=i.inArray,i=i.prev}else if(y){if(d=r?h:a[h],l=y[d],l==null)continue;v.push(d)}let R;if(!Array.isArray(l)){var T,g;ts(l)||st(!1,`Invalid AST Node: ${qt(l)}.`);const w=S?(T=n.get(l.kind))===null||T===void 0?void 0:T.leave:(g=n.get(l.kind))===null||g===void 0?void 0:g.enter;if(R=w?.call(t,l,d,y,v,O),R===fi)break;if(R===!1){if(!S){v.pop();continue}}else if(R!==void 0&&(u.push([d,R]),!S))if(ts(R))l=R;else{v.pop();continue}}if(R===void 0&&M&&u.push([d,l]),S)v.pop();else{var A;i={inArray:r,index:h,keys:a,edits:u,prev:i},r=Array.isArray(l),a=r?l:(A=s[l.kind])!==null&&A!==void 0?A:[],h=-1,u=[],y&&O.push(y),y=l}}while(i!==void 0);return u.length!==0?u[u.length-1][1]:e}function yi(e,t){const s=e[t];return typeof s=="object"?s:typeof s=="function"?{enter:s,leave:void 0}:{enter:e.enter,leave:e.leave}}function mi(e){return pi(e,vi)}const Ei=80,vi={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>p(e.definitions,`

`)},OperationDefinition:{leave(e){const t=b("(",p(e.variableDefinitions,", "),")"),s=p([e.operation,p([e.name,t]),p(e.directives," ")]," ");return(s==="query"?"":s+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:s,directives:n})=>e+": "+t+b(" = ",s)+b(" ",p(n," "))},SelectionSet:{leave:({selections:e})=>V(e)},Field:{leave({alias:e,name:t,arguments:s,directives:n,selectionSet:i}){const r=b("",e,": ")+t;let a=r+b("(",p(s,", "),")");return a.length>Ei&&(a=r+b(`(
`,nt(p(s,`
`)),`
)`)),p([a,p(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+b(" ",p(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:s})=>p(["...",b("on ",e),p(t," "),s]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:s,directives:n,selectionSet:i})=>`fragment ${e}${b("(",p(s,", "),")")} on ${t} ${b("",p(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?jn(e):ui(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+p(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+p(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+b("(",p(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:s})=>b("",e,`
`)+p(["schema",p(t," "),V(s)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:s})=>b("",e,`
`)+p(["scalar",t,p(s," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:s,directives:n,fields:i})=>b("",e,`
`)+p(["type",t,b("implements ",p(s," & ")),p(n," "),V(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:s,type:n,directives:i})=>b("",e,`
`)+t+(ns(s)?b(`(
`,nt(p(s,`
`)),`
)`):b("(",p(s,", "),")"))+": "+n+b(" ",p(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:s,defaultValue:n,directives:i})=>b("",e,`
`)+p([t+": "+s,b("= ",n),p(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:s,directives:n,fields:i})=>b("",e,`
`)+p(["interface",t,b("implements ",p(s," & ")),p(n," "),V(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:s,types:n})=>b("",e,`
`)+p(["union",t,p(s," "),b("= ",p(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:s,values:n})=>b("",e,`
`)+p(["enum",t,p(s," "),V(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:s})=>b("",e,`
`)+p([t,p(s," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:s,fields:n})=>b("",e,`
`)+p(["input",t,p(s," "),V(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:s,repeatable:n,locations:i})=>b("",e,`
`)+"directive @"+t+(ns(s)?b(`(
`,nt(p(s,`
`)),`
)`):b("(",p(s,", "),")"))+(n?" repeatable":"")+" on "+p(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>p(["extend schema",p(e," "),V(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>p(["extend scalar",e,p(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:s,fields:n})=>p(["extend type",e,b("implements ",p(t," & ")),p(s," "),V(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:s,fields:n})=>p(["extend interface",e,b("implements ",p(t," & ")),p(s," "),V(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:s})=>p(["extend union",e,p(t," "),b("= ",p(s," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:s})=>p(["extend enum",e,p(t," "),V(s)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:s})=>p(["extend input",e,p(t," "),V(s)]," ")}};function p(e,t=""){var s;return(s=e?.filter(n=>n).join(t))!==null&&s!==void 0?s:""}function V(e){return b(`{
`,nt(p(e,`
`)),`
}`)}function b(e,t,s=""){return t!=null&&t!==""?e+t+s:""}function nt(e){return b("  ",e.replace(/\n/g,`
  `))}function ns(e){var t;return(t=e?.some(s=>s.includes(`
`)))!==null&&t!==void 0?t:!1}const is="Accept",Rt="Content-Type",_t="application/json",Gs="application/graphql-response+json",rs=e=>e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),gi=e=>{const t=e.toLowerCase();return t.includes(Gs)||t.includes(_t)},os=e=>{try{if(Array.isArray(e))return{_tag:"Batch",executionResults:e.map(as)};if(tt(e))return{_tag:"Single",executionResult:as(e)};throw new Error(`Invalid execution result: result is not object or array. 
Got:
${String(e)}`)}catch(t){return t}},as=e=>{if(typeof e!="object"||e===null)throw new Error("Invalid execution result: result is not object");let t,s,n;if("errors"in e){if(!tt(e.errors)&&!Array.isArray(e.errors))throw new Error("Invalid execution result: errors is not plain object OR array");t=e.errors}if("data"in e){if(!tt(e.data)&&e.data!==null)throw new Error("Invalid execution result: data is not plain object");s=e.data}if("extensions"in e){if(!tt(e.extensions))throw new Error("Invalid execution result: extensions is not plain object");n=e.extensions}return{data:s,errors:t,extensions:n}},Ti=e=>e._tag==="Batch"?e.executionResults.some(cs):cs(e.executionResult),cs=e=>Array.isArray(e.errors)?e.errors.length>0:!!e.errors,$s=e=>typeof e=="object"&&e!==null&&"kind"in e&&e.kind===m.OPERATION_DEFINITION,Oi=e=>{let t;const s=e.definitions.filter($s);return s.length===1&&(t=s[0].name?.value),t},bi=e=>{let t=!1;const s=e.definitions.filter($s);return s.length===1&&(t=s[0].operation===ue.MUTATION),t},dt=(e,t)=>{const s=typeof e=="string"?e:mi(e);let n=!1,i;if(t)return{expression:s,isMutation:n,operationName:i};const r=Sn(()=>typeof e=="string"?ai(e):e);return r instanceof Error?{expression:s,isMutation:n,operationName:i}:(i=Oi(r),n=bi(r),{expression:s,operationName:i,isMutation:n})},Ut=JSON,ft=async e=>{const t={...e,method:e.request._tag==="Single"?e.request.document.isMutation?"POST":Xt(e.method??"post"):e.request.hasMutations?"POST":Xt(e.method??"post"),fetchOptions:{...e.fetchOptions,errorPolicy:e.fetchOptions.errorPolicy??"none"}},n=await xi(t.method)(t);if(!n.ok)return new xe({status:n.status,headers:n.headers},{query:e.request._tag==="Single"?e.request.document.expression:e.request.query,variables:e.request.variables});const i=await Ni(n,e.fetchOptions.jsonSerializer??Ut);if(i instanceof Error)throw i;const r={status:n.status,headers:n.headers};if(Ti(i)&&t.fetchOptions.errorPolicy==="none"){const a=i._tag==="Batch"?{...i.executionResults,...r}:{...i.executionResult,...r};return new xe(a,{query:e.request._tag==="Single"?e.request.document.expression:e.request.query,variables:e.request.variables})}switch(i._tag){case"Single":return{...r,...us(t)(i.executionResult)};case"Batch":return{...r,data:i.executionResults.map(us(t))};default:Lt(i)}},us=e=>t=>({extensions:t.extensions,data:t.data,errors:e.fetchOptions.errorPolicy==="all"?t.errors:void 0}),Ni=async(e,t)=>{const s=e.headers.get(Rt),n=await e.text();return s&&gi(s)?os(t.parse(n)):os(n)},xi=e=>async t=>{const s=new Headers(t.headers);let n=null,i;s.has(is)||s.set(is,[Gs,_t].join(", ")),e==="POST"?(i=(t.fetchOptions.jsonSerializer??Ut).stringify(Ii(t)),typeof i=="string"&&!s.has(Rt)&&s.set(Rt,_t)):n=Si(t);const r={method:e,headers:s,body:i,...t.fetchOptions};let a=new URL(t.url),h=r;if(t.middleware){const l=await Promise.resolve(t.middleware({...r,url:t.url,operationName:t.request._tag==="Single"?t.request.document.operationName:void 0,variables:t.request.variables})),{url:d,...y}=l;a=new URL(d),h=y}return n&&n.forEach((l,d)=>{a.searchParams.append(d,l)}),await(t.fetch??fetch)(a,h)},Ii=e=>{switch(e.request._tag){case"Single":return{query:e.request.document.expression,variables:e.request.variables,operationName:e.request.document.operationName};case"Batch":return ks(e.request.query,e.request.variables??[]).map(([t,s])=>({query:t,variables:s}));default:throw Lt(e.request)}},Si=e=>{const t=e.fetchOptions.jsonSerializer??Ut,s=new URLSearchParams;switch(e.request._tag){case"Single":return s.append("query",rs(e.request.document.expression)),e.request.variables&&s.append("variables",t.stringify(e.request.variables)),e.request.document.operationName&&s.append("operationName",e.request.document.operationName),s;case"Batch":{const n=e.request.variables?.map(a=>t.stringify(a))??[],i=e.request.query.map(rs),r=ks(i,n).map(([a,h])=>({query:a,variables:h}));return s.append("query",t.stringify(r)),s}default:throw Lt(e.request)}};class Fi{constructor(t,s={}){Oe(this,"url");Oe(this,"requestConfig");Oe(this,"rawRequest",async(...t)=>{const[s,n,i]=t,r=Dn(s,n,i),{headers:a,fetch:h=globalThis.fetch,method:u="POST",requestMiddleware:l,responseMiddleware:d,excludeOperationName:y,...v}=this.requestConfig,{url:O}=this;r.signal!==void 0&&(v.signal=r.signal);const T=dt(r.query,y),g=await ft({url:O,request:{_tag:"Single",document:T,variables:r.variables},headers:{...be(ht(a)),...be(r.requestHeaders)},fetch:h,method:u,fetchOptions:v,middleware:l});if(d&&await d(g,{operationName:T.operationName,variables:n,url:this.url}),g instanceof Error)throw g;return g});this.url=t,this.requestConfig=s}async request(t,...s){const[n,i]=s,r=Ci(t,n,i),{headers:a,fetch:h=globalThis.fetch,method:u="POST",requestMiddleware:l,responseMiddleware:d,excludeOperationName:y,...v}=this.requestConfig,{url:O}=this;r.signal!==void 0&&(v.signal=r.signal);const T=dt(r.document,y),g=await ft({url:O,request:{_tag:"Single",document:T,variables:r.variables},headers:{...be(ht(a)),...be(r.requestHeaders)},fetch:h,method:u,fetchOptions:v,middleware:l});if(d&&await d(g,{operationName:T.operationName,variables:r.variables,url:this.url}),g instanceof Error)throw g;return g.data}async batchRequests(t,s){const n=An(t,s),{headers:i,excludeOperationName:r,...a}=this.requestConfig;n.signal!==void 0&&(a.signal=n.signal);const h=n.documents.map(({document:v})=>dt(v,r)),u=h.map(({expression:v})=>v),l=h.some(({isMutation:v})=>v),d=n.documents.map(({variables:v})=>v),y=await ft({url:this.url,request:{_tag:"Batch",operationName:void 0,query:u,hasMutations:l,variables:d},headers:{...be(ht(i)),...be(n.requestHeaders)},fetch:this.requestConfig.fetch??globalThis.fetch,method:this.requestConfig.method||"POST",fetchOptions:a,middleware:this.requestConfig.requestMiddleware});if(this.requestConfig.responseMiddleware&&await this.requestConfig.responseMiddleware(y,{operationName:void 0,variables:d,url:this.url}),y instanceof Error)throw y;return y.data}setHeaders(t){return this.requestConfig.headers=t,this}setHeader(t,s){const{headers:n}=this.requestConfig;return n?n[t]=s:this.requestConfig.headers={[t]:s},this}setEndpoint(t){return this.url=t,this}}const Ci=(e,t,s)=>e.document?e:{document:e,variables:t,requestHeaders:s,signal:void 0},Pi=(e,...t)=>e.reduce((s,n,i)=>`${s}${n}${i in t?String(t[i]):""}`,"");export{Fi as G,Ri as Q,pn as a,_i as b,wi as c,Pi as g,ki as u};
